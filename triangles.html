<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Triangle Types Quiz</title>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        margin: 0;
        padding: 20px;
        background-color: #f0f4f8;
        color: #333;
      }
      h1 {
        color: #0066cc;
        margin-bottom: 10px;
      }
      .streak-counter {
        font-size: 1.5rem;
        font-weight: bold;
        color: #27ae60;
        margin-bottom: 20px;
      }
      .container {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 20px;
        max-width: 800px;
        width: 100%;
      }
      .triangle-panel {
        background-color: #ffffff;
        border: 3px solid #0066cc;
        border-radius: 12px;
        padding: 40px;
        width: 100%;
        max-width: 600px;
        min-height: 400px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
      #triangleSvg {
        max-width: 100%;
        max-height: 100%;
      }
      .buttons {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
        width: 100%;
        max-width: 600px;
      }
      button {
        padding: 20px;
        font-size: 1.2rem;
        font-weight: bold;
        border: 2px solid #0066cc;
        border-radius: 8px;
        background-color: #ffffff;
        color: #0066cc;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      button:hover {
        background-color: #0066cc;
        color: #ffffff;
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 102, 204, 0.3);
      }
      button:active {
        transform: translateY(0);
      }
      button.correct {
        background-color: #27ae60;
        color: white;
        border-color: #27ae60;
      }
      button.incorrect {
        background-color: #e74c3c;
        color: white;
        border-color: #e74c3c;
      }
      .feedback {
        font-size: 1.5rem;
        font-weight: bold;
        min-height: 2rem;
        text-align: center;
      }
      .feedback.correct {
        color: #27ae60;
      }
      .feedback.incorrect {
        color: #e74c3c;
      }
      .next-button-container {
        display: flex;
        justify-content: center;
        min-height: 60px;
      }
      #nextButton {
        background-color: #27ae60;
        color: white;
        border-color: #27ae60;
        display: none;
      }
      #nextButton:hover {
        background-color: #229954;
        border-color: #229954;
      }
    </style>
  </head>
  <body>
    <h1>Triangle Types Quiz</h1>
    <div class="streak-counter">Streak: <span id="streakCount">0</span></div>
    <div class="container">
      <div class="triangle-panel">
        <svg id="triangleSvg" width="400" height="400" viewBox="0 0 400 400">
          <polygon id="triangle" points="" fill="#3498db" stroke="#2c3e50" stroke-width="3" />
        </svg>
      </div>
      <div class="feedback" id="feedback"></div>
      <div class="buttons">
        <button id="equilateralBtn" onclick="checkAnswer('equilateral')">Equilateral</button>
        <button id="isoscelesBtn" onclick="checkAnswer('isosceles')">Isosceles</button>
        <button id="scaleneBtn" onclick="checkAnswer('scalene')">Scalene</button>
        <button id="rightBtn" onclick="checkAnswer('right')">Right-Angled</button>
      </div>
      <div class="next-button-container">
        <button id="nextButton" onclick="nextTriangle()">Next Triangle</button>
      </div>
    </div>

    <script>
      let currentTriangleType = '';
      let streak = 0;
      let answered = false;

      const triangleTypes = ['equilateral', 'isosceles', 'scalene', 'right'];

      function generateTriangle() {
        // Select random triangle type
        currentTriangleType = triangleTypes[Math.floor(Math.random() * triangleTypes.length)];
        
        // Generate triangle coordinates based on type
        let points;
        const centerX = 200;
        const centerY = 200;
        // Add random size variation up to 30% bigger
        const baseSize = 120 * (1 + Math.random() * 0.3);
        
        switch(currentTriangleType) {
          case 'equilateral':
            // All sides equal - fixed formula
            const height = baseSize * Math.sqrt(3) / 2;
            points = [
              { x: 0, y: -height / 2 },           // Top vertex
              { x: -baseSize / 2, y: height / 2 }, // Bottom left
              { x: baseSize / 2, y: height / 2 }   // Bottom right
            ];
            break;
          
          case 'isosceles':
            // Two sides equal, but not equilateral
            const isoHeight = baseSize * 1.3;
            points = [
              { x: 0, y: isoHeight / 2 },
              { x: -baseSize / 2, y: -isoHeight / 2 },
              { x: baseSize / 2, y: -isoHeight / 2 }
            ];
            break;
          
          case 'scalene':
            // All sides different - ensure sufficiently different lengths
            // Use more varied multipliers to make it clearly scalene
            points = [
              { x: -baseSize * 0.2, y: baseSize * 0.7 },
              { x: -baseSize * 0.8, y: -baseSize * 0.3 },
              { x: baseSize * 0.5, y: 0 }
            ];
            break;
          
          case 'right':
            // One 90-degree angle
            points = [
              { x: -baseSize / 2, y: baseSize / 2 },
              { x: -baseSize / 2, y: -baseSize / 2 },
              { x: baseSize / 2, y: -baseSize / 2 }
            ];
            break;
        }
        
        // Apply random rotation
        const rotation = Math.random() * 360;
        const rotatedPoints = points.map(p => {
          const angle = rotation * Math.PI / 180;
          const cos = Math.cos(angle);
          const sin = Math.sin(angle);
          return {
            x: centerX + p.x * cos - p.y * sin,
            y: centerY + p.x * sin + p.y * cos
          };
        });
        
        // Set the polygon points
        const pointsStr = rotatedPoints.map(p => `${p.x},${p.y}`).join(' ');
        document.getElementById('triangle').setAttribute('points', pointsStr);
        
        // Reset UI
        answered = false;
        document.getElementById('feedback').textContent = '';
        document.getElementById('feedback').className = 'feedback';
        document.getElementById('nextButton').style.display = 'none';
        
        // Reset button styles
        ['equilateralBtn', 'isoscelesBtn', 'scaleneBtn', 'rightBtn'].forEach(id => {
          const btn = document.getElementById(id);
          btn.className = '';
          btn.disabled = false;
        });
      }

      function checkAnswer(selectedType) {
        if (answered) return;
        
        answered = true;
        const feedback = document.getElementById('feedback');
        const buttons = document.querySelectorAll('.buttons button');
        
        // Map internal type names to display names
        const typeDisplayNames = {
          'equilateral': 'Equilateral',
          'isosceles': 'Isosceles',
          'scalene': 'Scalene',
          'right': 'Right-Angled'
        };
        
        // Disable all buttons
        buttons.forEach(btn => btn.disabled = true);
        
        if (selectedType === currentTriangleType) {
          // Correct answer
          streak++;
          document.getElementById('streakCount').textContent = streak;
          feedback.textContent = '✓ Correct!';
          feedback.className = 'feedback correct';
          document.getElementById(`${selectedType}Btn`).classList.add('correct');
        } else {
          // Incorrect answer
          streak = 0;
          document.getElementById('streakCount').textContent = streak;
          feedback.textContent = `✗ Incorrect! It was ${typeDisplayNames[currentTriangleType]}.`;
          feedback.className = 'feedback incorrect';
          document.getElementById(`${selectedType}Btn`).classList.add('incorrect');
          document.getElementById(`${currentTriangleType}Btn`).classList.add('correct');
        }
        
        // Show next button
        document.getElementById('nextButton').style.display = 'block';
      }

      function nextTriangle() {
        generateTriangle();
      }

      // Initialize with first triangle
      window.onload = () => {
        generateTriangle();
      };
    </script>
  </body>
</html>
